function calc1() {

  if ($('dossier_ddr').value != "")
    {
    ddr = parseDate($('dossier_ddr').value, '.');
    $('dossier_dg').value = addDays(ddr, 14);
    $('dossier_dap').value = addDays(ddr, 283);
    }
  else
    {
    $('dossier_dg').value = ""
    $('dossier_dap').value = ""
    }

  if ($('dossier_dg').value != "" && $('dossier_date_appel').value != "")
    {
    dg = parseDate($('dossier_dg').value, '.')
    dappel = parseDate($('dossier_date_appel').value, '.');
    start = dg.getTime();
    end = dappel.getTime();
    days = (end - start) / (1000 * 60 * 60 * 24);

    $('dossier_sa').value = Math.round(days/7);
    }
  else
    {
    $('dossier_sa').value = ""
    }

}

function calc2() {
  if ($('dossier_dra').value != "" && $('dossier_dg').value != "")
    {
    date_acc = parseDate($('dossier_dra').value, '.');
    dg = parseDate($('dossier_dg').value, '.')
    $('dossier_terme').value = getSA(dg, date_acc);
    }
}

function getSA(startDate, endDate) {
  start = startDate.getTime();
  end = endDate.getTime();
  days = (end - start) / (1000 * 60 * 60 * 24);
  weeks = Math.round(days/7);
  return weeks;
}

function parseDate(strDate, strSep) {
  dateArray = strDate.split(strSep);
  date = new Date(dateArray[2], dateArray[1]-1, dateArray[0]);
  return date;
}

function addDays(objDate, days) {
  objDate.setDate(objDate.getDate() + days);
  arrDate = new Array();
  arrDate.push(objDate.getDate(), objDate.getMonth()+1, objDate.getFullYear());
  return arrDate.join(".");
}

document.observe('dom:loaded', function() {
  $('dossier_ddr').observe('mouseover', calc1);
  $('dossier_dra').observe('mouseover', calc2);
});
